local InterfaceManager = {}
InterfaceManager.Folder = "FluentXP"
InterfaceManager.Library = nil

function InterfaceManager:SetLibrary(lib)
    self.Library = lib
end

function InterfaceManager:SetFolder(folder)
    self.Folder = folder
end

local function GetWindow()
    if InterfaceManager.Library.GetWindow then
        return InterfaceManager.Library:GetWindow()
    end
    return InterfaceManager.Library.Window
end

function InterfaceManager:BuildInterfaceSection(Tab)
    if not self.Library then return end

    local Window = GetWindow()
    if not Window then return end

    Tab:AddParagraph({
        Title = "Interface Settings",
        Content = "FluentXP Interface Manager"
    })

    if self.Library.SetTheme then
        Tab:AddDropdown("ThemeSelector", {
            Title = "Theme",
            Values = self.Library.Themes or {"Dark","Light"},
            Default = "Dark",
            Callback = function(Value)
                self.Library:SetTheme(Value)
            end
        })
    end

    Tab:AddToggle("SaveWindowPos", {
        Title = "Save Window Position",
        Default = true,
        Callback = function(Value)
            if Window and Window.SetSavePosition then
                Window:SetSavePosition(Value)
            end
        end
    })

    Tab:AddKeybind("MinimizeKey", {
        Title = "Minimize Key",
        Default = Enum.KeyCode.LeftControl,
        Callback = function(Key)
            if Window then
                Window.MinimizeKey = Key
            end
        end
    })
end

return InterfaceManager