local DiscordLib = {}
local cloneref = cloneref or function(o) return o end
COREGUI = cloneref(game:GetService("CoreGui"))
Players = cloneref(game:GetService("Players"))
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local HttpService = game:GetService("HttpService")
local pfp
local user
local tag
local userinfo = {}

for _, XP in pairs(game:GetService("CoreGui"):GetChildren()) do
    if XP.Name == "Discord" then
        XP:Destroy()
    end
end
for _, XP in pairs(Players.LocalPlayer:FindFirstChild("PlayerGui"):GetChildren()) do
    if XP.Name == "DiscordToggle" then
        XP:Destroy()
    end
end

pcall(function()
    userinfo = HttpService:JSONDecode(readfile("discordlibinfo.txt"));
end)
pfp = userinfo["pfp"] or "https://www.roblox.com/headshot-thumbnail/image?userId="..Players.LocalPlayer.UserId.."&width=420&height=420&format=png"
user =  userinfo["user"] or Players.LocalPlayer.Name
tag = userinfo["tag"] or tostring(math.random(1000,9999))

local function SaveInfo()
    userinfo["pfp"] = pfp
    userinfo["user"] = user
    userinfo["tag"] = tag
    writefile("discordlibinfo.txt", HttpService:JSONEncode(userinfo));
end

local function MakeDraggable(topbarobject, object)
    local Dragging = nil
    local DragInput = nil
    local DragStart = nil
    local StartPosition = nil

    local function Update(input)
        local Delta = input.Position - DragStart
        local pos = UDim2.new(StartPosition.X.Scale, StartPosition.X.Offset + Delta.X, StartPosition.Y.Scale, StartPosition.Y.Offset + Delta.Y)
        object.Position = pos
    end

    topbarobject.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            Dragging = true
            DragStart = input.Position
            StartPosition = object.Position

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    Dragging = false
                end
            end)
        end
    end)

    topbarobject.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            DragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input == DragInput and Dragging then
            Update(input)
        end
    end)
end

local Discord = Instance.new("ScreenGui")
Discord.Name = "Discord"
Discord.Parent = game.CoreGui
Discord.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Toggle Button
spawn(function()
    local ScreenGui = Instance.new("ScreenGui")
    local ABDC = Instance.new("TextButton")
    ScreenGui.Name = "DiscordToggle"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.Parent = Players.LocalPlayer:FindFirstChild("PlayerGui")
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    ABDC.Name = math.random()
    ABDC.Parent = ScreenGui
    ABDC.Draggable = true
    ABDC.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    ABDC.BorderSizePixel = 0
    ABDC.Position = UDim2.new(0.8, 0, 0.9, 0)
    ABDC.Size = UDim2.new(0, 80, 0, 25)
    ABDC.Font = Enum.Font.SourceSans
    ABDC.Text = "Enabled"
    ABDC.TextColor3 = Color3.fromRGB(255, 255, 255)
    ABDC.TextSize = 14
    local isEnabled = false
    local function toggleState()
        isEnabled = not isEnabled
        local DiscordGui = game:GetService("CoreGui"):FindFirstChild("Discord")
        if isEnabled then
            ABDC.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
            ABDC.Text = "Enabled"
            if DiscordGui then
                DiscordGui.Enabled = true
            end
        else
            ABDC.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
            ABDC.Text = "Disabled"
            if DiscordGui then
                DiscordGui.Enabled = false
            end
        end
    end
    ABDC.MouseButton1Click:Connect(toggleState)
    local function initialize()
        local DiscordGui = game:GetService("CoreGui"):FindFirstChild("Discord")
        if DiscordGui then
            isEnabled = DiscordGui.Enabled
            if isEnabled then
                ABDC.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
                ABDC.Text = "Enabled"
            else
                ABDC.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
                ABDC.Text = "Disabled"
            end
        else
            ABDC.Text = "Error Found Lib"
        end
    end
    initialize()
end)

function DiscordLib:Window(text)
    local currentservertoggled = ""
    local minimized = false
    local fs = false
    local settingsopened = false
    local MainFrame = Instance.new("Frame")
    local TopFrame = Instance.new("Frame")
    local Title = Instance.new("TextLabel")
    local CloseBtn = Instance.new("TextButton")
    local CloseIcon = Instance.new("ImageLabel")
    local MinimizeBtn = Instance.new("TextButton")
    local MinimizeIcon = Instance.new("ImageLabel")
    local ServersHolder = Instance.new("Folder")
    local Userpad = Instance.new("Frame")
    local UserIcon = Instance.new("Frame")
    local UserIconCorner = Instance.new("UICorner")
    local UserImage = Instance.new("ImageLabel")
    local UserCircleImage = Instance.new("ImageLabel")
    local UserName = Instance.new("TextLabel")
    local UserTag = Instance.new("TextLabel")
    local ServersHoldFrame = Instance.new("Frame")
    local ServersHold = Instance.new("ScrollingFrame")
    local ServersHoldLayout = Instance.new("UIListLayout")
    local ServersHoldPadding = Instance.new("UIPadding")
    local TopFrameHolder = Instance.new("Frame")
    local MainCorner = Instance.new("UICorner")

    MainFrame.Name = "MainFrame"
    MainFrame.Parent = Discord
    MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    MainFrame.BackgroundColor3 = Color3.fromRGB(32, 34, 37)
    MainFrame.BorderSizePixel = 0
    MainFrame.ClipsDescendants = true
    MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    MainFrame.Size = UDim2.new(0, 681, 0, 396)

    -- Añadir bordes redondeados a MainFrame
    MainCorner.CornerRadius = UDim.new(0, 8)
    MainCorner.Parent = MainFrame

    TopFrame.Name = "TopFrame"
    TopFrame.Parent = MainFrame
    TopFrame.BackgroundColor3 = Color3.fromRGB(32, 34, 37)
    TopFrame.BackgroundTransparency = 1.000
    TopFrame.BorderSizePixel = 0
    TopFrame.Position = UDim2.new(-0.000658480625, 0, 0, 0)
    TopFrame.Size = UDim2.new(0, 681, 0, 22)

    TopFrameHolder.Name = "TopFrameHolder"
    TopFrameHolder.Parent = TopFrame
    TopFrameHolder.BackgroundColor3 = Color3.fromRGB(32, 34, 37)
    TopFrameHolder.BackgroundTransparency = 1.000
    TopFrameHolder.BorderSizePixel = 0
    TopFrameHolder.Position = UDim2.new(-0.000658480625, 0, 0, 0)
    TopFrameHolder.Size = UDim2.new(0, 681, 0, 22)

    Title.Name = "Title"
    Title.Parent = TopFrame
    Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    Title.BackgroundTransparency = 1.000
    Title.Position = UDim2.new(0.0102790017, 0, 0, 0)
    Title.Size = UDim2.new(0, 192, 0, 23)
    Title.Font = Enum.Font.Gotham
    Title.Text = text
    Title.TextColor3 = Color3.fromRGB(99, 102, 109)
    Title.TextSize = 13.000
    Title.TextXAlignment = Enum.TextXAlignment.Left

    CloseBtn.Name = "CloseBtn"
    CloseBtn.Parent = TopFrame
    CloseBtn.BackgroundColor3 = Color3.fromRGB(32, 34, 37)
    CloseBtn.BackgroundTransparency = 0
    CloseBtn.Position = UDim2.new(0.959063113, 0, -0.0169996787, 0)
    CloseBtn.Size = UDim2.new(0, 28, 0, 22)
    CloseBtn.Font = Enum.Font.Gotham
    CloseBtn.Text = ""
    CloseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    CloseBtn.TextSize = 14.000
    CloseBtn.BorderSizePixel = 0
    CloseBtn.AutoButtonColor = false

    CloseIcon.Name = "CloseIcon"
    CloseIcon.Parent = CloseBtn
    CloseIcon.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    CloseIcon.BackgroundTransparency = 1.000
    CloseIcon.Position = UDim2.new(0.189182192, 0, 0.128935531, 0)
    CloseIcon.Size = UDim2.new(0, 17, 0, 17)
    CloseIcon.Image = "http://www.roblox.com/asset/?id=6035047409"
    CloseIcon.ImageColor3 = Color3.fromRGB(220, 221, 222)

    MinimizeBtn.Name = "MinimizeButton"
    MinimizeBtn.Parent = TopFrame
    MinimizeBtn.BackgroundColor3 = Color3.fromRGB(32, 34, 37)
    MinimizeBtn.BackgroundTransparency = 0
    MinimizeBtn.Position = UDim2.new(0.917947114, 0, -0.0169996787, 0)
    MinimizeBtn.Size = UDim2.new(0, 28, 0, 22)
    MinimizeBtn.Font = Enum.Font.Gotham
    MinimizeBtn.Text = ""
    MinimizeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    MinimizeBtn.TextSize = 14.000
    MinimizeBtn.BorderSizePixel = 0
    MinimizeBtn.AutoButtonColor = false

    MinimizeIcon.Name = "MinimizeLabel"
    MinimizeIcon.Parent = MinimizeBtn
    MinimizeIcon.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    MinimizeIcon.BackgroundTransparency = 1.000
    MinimizeIcon.Position = UDim2.new(0.189182192, 0, 0.128935531, 0)
    MinimizeIcon.Size = UDim2.new(0, 17, 0, 17)
    MinimizeIcon.Image = "http://www.roblox.com/asset/?id=6035067836"
    MinimizeIcon.ImageColor3 = Color3.fromRGB(220, 221, 222)

    ServersHolder.Name = "ServersHolder"
    ServersHolder.Parent = TopFrameHolder

    Userpad.Name = "Userpad"
    Userpad.Parent = TopFrameHolder
    Userpad.BackgroundColor3 = Color3.fromRGB(41, 43, 47)
    Userpad.BorderSizePixel = 0
    Userpad.Position = UDim2.new(0.106243297, 0, 15.9807148, 0)
    Userpad.Size = UDim2.new(0, 179, 0, 43)

    UserIcon.Name = "UserIcon"
    UserIcon.Parent = Userpad
    UserIcon.BackgroundColor3 = Color3.fromRGB(31, 33, 36)
    UserIcon.BorderSizePixel = 0
    UserIcon.Position = UDim2.new(0.0340000018, 0, 0.123999998, 0)
    UserIcon.Size = UDim2.new(0, 32, 0, 32)

    UserIconCorner.CornerRadius = UDim.new(1, 8)
    UserIconCorner.Name = "UserIconCorner"
    UserIconCorner.Parent = UserIcon

    UserImage.Name = "UserImage"
    UserImage.Parent = UserIcon
    UserImage.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    UserImage.BackgroundTransparency = 1.000
    UserImage.Size = UDim2.new(0, 32, 0, 32)
    UserImage.Image = pfp

    UserCircleImage.Name = "UserImage"
    UserCircleImage.Parent = UserImage
    UserCircleImage.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    UserCircleImage.BackgroundTransparency = 1.000
    UserCircleImage.Size = UDim2.new(0, 32, 0, 32)
    UserCircleImage.Image = "rbxassetid://4031889928"
    UserCircleImage.ImageColor3 = Color3.fromRGB(41, 43, 47)

    UserName.Name = "UserName"
    UserName.Parent = Userpad
    UserName.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    UserName.BackgroundTransparency = 1.000
    UserName.BorderSizePixel = 0
    UserName.Position = UDim2.new(0.230000004, 0, 0.115999997, 0)
    UserName.Size = UDim2.new(0, 98, 0, 17)
    UserName.Font = Enum.Font.GothamSemibold
    UserName.TextColor3 = Color3.fromRGB(255, 255, 255)
    UserName.TextSize = 13.000
    UserName.TextXAlignment = Enum.TextXAlignment.Left
    UserName.ClipsDescendants = true

    UserTag.Name = "UserTag"
    UserTag.Parent = Userpad
    UserTag.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    UserTag.BackgroundTransparency = 1.000
    UserTag.BorderSizePixel = 0
    UserTag.Position = UDim2.new(0.230000004, 0, 0.455000013, 0)
    UserTag.Size = UDim2.new(0, 95, 0, 17)
    UserTag.Font = Enum.Font.Gotham
    UserTag.TextColor3 = Color3.fromRGB(255, 255, 255)
    UserTag.TextSize = 13.000
    UserTag.TextTransparency = 0.300
    UserTag.TextXAlignment = Enum.TextXAlignment.Left

    UserName.Text = user
    UserTag.Text = "#" .. tag

    -- Funciones de los botones de la ventana
    CloseBtn.MouseButton1Click:Connect(function()
        Discord.Enabled = false
        local toggle = Players.LocalPlayer:FindFirstChild("PlayerGui"):FindFirstChild("DiscordToggle")
        if toggle then
            local btn = toggle:FindFirstChildOfClass("TextButton")
            if btn then
                btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
                btn.Text = "Disabled"
            end
        end
    end)

    MinimizeBtn.MouseButton1Click:Connect(function()
        if minimized == false then
            MainFrame:TweenSize(UDim2.new(0, 681, 0, 22), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, 0.2, true)
            minimized = true
        else
            MainFrame:TweenSize(UDim2.new(0, 681, 0, 396), Enum.EasingDirection.Out, Enum.EasingStyle.Quart, 0.2, true)
            minimized = false
        end
    end)

    -- Hacer que la ventana sea arrastrable
    MakeDraggable(TopFrame, MainFrame)

    -- Configuración del servidor
    ServersHoldFrame.Name = "ServersHoldFrame"
    ServersHoldFrame.Parent = MainFrame
    ServersHoldFrame.BackgroundColor3 = Color3.fromRGB(47, 49, 54)
    ServersHoldFrame.BorderSizePixel = 0
    ServersHoldFrame.Position = UDim2.new(0.002, 0, 0.057, 0)
    ServersHoldFrame.Size = UDim2.new(0, 72, 0, 353)

    local ServersHoldFrameCorner = Instance.new("UICorner")
    ServersHoldFrameCorner.CornerRadius = UDim.new(0, 8)
    ServersHoldFrameCorner.Parent = ServersHoldFrame

    ServersHold.Name = "ServersHold"
    ServersHold.Parent = ServersHoldFrame
    ServersHold.Active = true
    ServersHold.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    ServersHold.BackgroundTransparency = 1.000
    ServersHold.BorderSizePixel = 0
    ServersHold.Position = UDim2.new(0, 5, 0, 5)
    ServersHold.Size = UDim2.new(0, 62, 0, 343)
    ServersHold.CanvasSize = UDim2.new(0, 0, 0, 0)
    ServersHold.ScrollBarThickness = 0

    ServersHoldLayout.Name = "ServersHoldLayout"
    ServersHoldLayout.Parent = ServersHold
    ServersHoldLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
    ServersHoldLayout.SortOrder = Enum.SortOrder.LayoutOrder
    ServersHoldLayout.Padding = UDim.new(0, 5)

    ServersHoldPadding.Name = "ServersHoldPadding"
    ServersHoldPadding.Parent = ServersHold
    ServersHoldPadding.PaddingTop = UDim.new(0, 5)

    local Servers = {}
    local Channels = {}

    -- Función para cambiar el tema
    function DiscordLib:SetTheme(themeColor)
        MainFrame.BackgroundColor3 = themeColor
        TopFrame.BackgroundColor3 = themeColor
        TopFrameHolder.BackgroundColor3 = themeColor
        CloseBtn.BackgroundColor3 = themeColor
        MinimizeBtn.BackgroundColor3 = themeColor
        ServersHoldFrame.BackgroundColor3 = themeColor:lerp(Color3.new(0, 0, 0), 0.2) -- Un color ligeramente más oscuro para los servidores
        Userpad.BackgroundColor3 = themeColor:lerp(Color3.new(0, 0, 0), 0.3)
        UserIcon.BackgroundColor3 = themeColor:lerp(Color3.new(0, 0, 0), 0.4)
    end

    -- Crear un servidor
    function Servers:Server(Name, Image, functioncallback)
        local ServerBtn = Instance.new("TextButton")
        local ServerIcon = Instance.new("ImageLabel")
        local ServerCorner = Instance.new("UICorner")

        ServerBtn.Name = "ServerBtn"
        ServerBtn.Parent = ServersHold
        ServerBtn.BackgroundColor3 = Color3.fromRGB(43, 45, 49)
        ServerBtn.BorderSizePixel = 0
        ServerBtn.Size = UDim2.new(0, 50, 0, 50)
        ServerBtn.AutoButtonColor = false
        ServerBtn.Text = ""
        ServerBtn.BackgroundTransparency = 0.5

        ServerCorner.CornerRadius = UDim.new(0, 25)
        ServerCorner.Parent = ServerBtn

        ServerIcon.Name = "ServerIcon"
        ServerIcon.Parent = ServerBtn
        ServerIcon.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        ServerIcon.BackgroundTransparency = 1.000
        ServerIcon.Size = UDim2.new(0, 45, 0, 45)
        ServerIcon.Position = UDim2.new(0, 2, 0, 2)
        ServerIcon.Image = Image
        ServerIcon.ImageColor3 = Color3.fromRGB(220, 221, 222)

        local ServerIconCorner = Instance.new("UICorner")
        ServerIconCorner.CornerRadius = UDim.new(0, 22)
        ServerIconCorner.Parent = ServerIcon

        ServersHold.CanvasSize = UDim2.new(0, 0, 0, ServersHoldLayout.AbsoluteContentSize.Y)

        local ServerHighlight = Instance.new("Frame")
        ServerHighlight.Name = "ServerHighlight"
        ServerHighlight.Parent = ServersHoldFrame
        ServerHighlight.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        ServerHighlight.BorderSizePixel = 0
        ServerHighlight.Position = UDim2.new(0, 0, 0, 0)
        ServerHighlight.Size = UDim2.new(0, 4, 0, 0)
        ServerHighlight.Visible = false

        ServerBtn.MouseButton1Click:Connect(function()
            for i, v in pairs(ServersHold:GetChildren()) do
                if v:IsA("TextButton") then
                    TweenService:Create(v, TweenInfo.new(0.2), {BackgroundTransparency = 0.5}):Play()
                end
            end
            TweenService:Create(ServerBtn, TweenInfo.new(0.2), {BackgroundTransparency = 0}):Play()
            if functioncallback then
                functioncallback()
            end
        end)

        -- Función para seleccionar este servidor
        ServerBtn.MouseButton1Click:Connect(function()
            currentservertoggled = Name
            for i, v in pairs(Channels) do
                if v.Parent then
                    v.Visible = false
                end
            end
            for i, v in pairs(Channels) do
                if i:match("^" .. Name .. ":") then
                    if v.Parent then
                        v.Visible = true
                    end
                end
            end
        end)

        return ServerBtn
    end

    -- Crear un canal (categoría)
    function Servers:Channel(Name)
        local ChannelFrame = Instance.new("ScrollingFrame")
        local ChannelLayout = Instance.new("UIListLayout")
        local ChannelPadding = Instance.new("UIPadding")

        ChannelFrame.Name = Name .. "ChannelFrame"
        ChannelFrame.Parent = MainFrame
        ChannelFrame.BackgroundColor3 = Color3.fromRGB(47, 49, 54)
        ChannelFrame.BackgroundTransparency = 1.000
        ChannelFrame.BorderSizePixel = 0
        ChannelFrame.Position = UDim2.new(0.116, 0, 0.083, 0)
        ChannelFrame.Size = UDim2.new(0, 170, 0, 344)
        ChannelFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
        ChannelFrame.ScrollBarThickness = 4
        ChannelFrame.Visible = false

        ChannelLayout.Name = "ChannelLayout"
        ChannelLayout.Parent = ChannelFrame
        ChannelLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
        ChannelLayout.SortOrder = Enum.SortOrder.LayoutOrder
        ChannelLayout.Padding = UDim.new(0, 2)

        ChannelPadding.Name = "ChannelPadding"
        ChannelPadding.Parent = ChannelFrame
        ChannelPadding.PaddingLeft = UDim.new(0, 8)

        Channels[Name] = ChannelFrame

        local ChannelItems = {}

        -- Crear un botón de canal
        function ChannelItems:Button(Name, functioncallback)
            local Button = Instance.new("TextButton")
            local ButtonCorner = Instance.new("UICorner")
            local ButtonLabel = Instance.new("TextLabel")

            Button.Name = "Button"
            Button.Parent = ChannelFrame
            Button.BackgroundColor3 = Color3.fromRGB(66, 69, 75)
            Button.BackgroundTransparency = 0.700
            Button.BorderSizePixel = 0
            Button.Size = UDim2.new(0, 150, 0, 32)
            Button.AutoButtonColor = false
            Button.Text = ""
            Button.Font = Enum.Font.SourceSans
            Button.TextColor3 = Color3.fromRGB(255, 255, 255)
            Button.TextSize = 14.000

            ButtonCorner.CornerRadius = UDim.new(0, 4)
            ButtonCorner.Parent = Button

            ButtonLabel.Name = "ButtonLabel"
            ButtonLabel.Parent = Button
            ButtonLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            ButtonLabel.BackgroundTransparency = 1.000
            ButtonLabel.Position = UDim2.new(0, 5, 0, 0)
            ButtonLabel.Size = UDim2.new(0, 140, 0, 32)
            ButtonLabel.Font = Enum.Font.Gotham
            ButtonLabel.Text = "  #  " .. Name
            ButtonLabel.TextColor3 = Color3.fromRGB(114, 118, 125)
            ButtonLabel.TextSize = 14.000
            ButtonLabel.TextXAlignment = Enum.TextXAlignment.Left

            ChannelFrame.CanvasSize = UDim2.new(0, 0, 0, ChannelLayout.AbsoluteContentSize.Y)

            Button.MouseButton1Click:Connect(function()
                if functioncallback then
                    functioncallback()
                end
            end)

            Button.MouseEnter:Connect(function()
                TweenService:Create(Button, TweenInfo.new(0.2), {BackgroundTransparency = 0.5}):Play()
                ButtonLabel.TextColor3 = Color3.fromRGB(220, 221, 222)
            end)

            Button.MouseLeave:Connect(function()
                TweenService:Create(Button, TweenInfo.new(0.2), {BackgroundTransparency = 0.7}):Play()
                ButtonLabel.TextColor3 = Color3.fromRGB(114, 118, 125)
            end)

            return Button
        end

        return ChannelItems
    end

    local ServerNamespace = {}
    function ServerNamespace:CreateSection(Name)
        local Section = {}
        local SectionFrame = Instance.new("ScrollingFrame")
        local SectionLayout = Instance.new("UIListLayout")
        local SectionPadding = Instance.new("UIPadding")

        SectionFrame.Name = Name .. "SectionFrame"
        SectionFrame.Parent = MainFrame
        SectionFrame.BackgroundColor3 = Color3.fromRGB(47, 49, 54)
        SectionFrame.BackgroundTransparency = 1.000
        SectionFrame.BorderSizePixel = 0
        SectionFrame.Position = UDim2.new(0.405, 0, 0.083, 0)
        SectionFrame.Size = UDim2.new(0, 390, 0, 344)
        SectionFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
        SectionFrame.ScrollBarThickness = 4
        SectionFrame.Visible = false

        SectionLayout.Name = "SectionLayout"
        SectionLayout.Parent = SectionFrame
        SectionLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
        SectionLayout.SortOrder = Enum.SortOrder.LayoutOrder
        SectionLayout.Padding = UDim.new(0, 5)

        SectionPadding.Name = "SectionPadding"
        SectionPadding.Parent = SectionFrame
        SectionPadding.PaddingLeft = UDim.new(0, 8)
        SectionPadding.PaddingTop = UDim.new(0, 5)

        Channels[Name] = SectionFrame

        -- Label de sección
        function Section:Label(text)
            local Label = Instance.new("TextLabel")
            Label.Parent = SectionFrame
            Label.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            Label.BackgroundTransparency = 1.000
            Label.Size = UDim2.new(0, 374, 0, 20)
            Label.Font = Enum.Font.GothamBold
            Label.Text = text
            Label.TextColor3 = Color3.fromRGB(255, 255, 255)
            Label.TextSize = 12.000
            Label.TextXAlignment = Enum.TextXAlignment.Left

            SectionFrame.CanvasSize = UDim2.new(0, 0, 0, SectionLayout.AbsoluteContentSize.Y)
            return Label
        end

        -- Botón normal
        function Section:Button(text, callback)
            local Button = Instance.new("TextButton")
            local ButtonCorner = Instance.new("UICorner")

            Button.Parent = SectionFrame
            Button.BackgroundColor3 = Color3.fromRGB(66, 69, 75)
            Button.BorderSizePixel = 0
            Button.Size = UDim2.new(0, 374, 0, 32)
            Button.AutoButtonColor = false
            Button.Text = text
            Button.Font = Enum.Font.Gotham
            Button.TextColor3 = Color3.fromRGB(255, 255, 255)
            Button.TextSize = 14.000

            ButtonCorner.CornerRadius = UDim.new(0, 4)
            ButtonCorner.Parent = Button

            Button.MouseButton1Click:Connect(function()
                if callback then
                    callback()
                end
            end)

            SectionFrame.CanvasSize = UDim2.new(0, 0, 0, SectionLayout.AbsoluteContentSize.Y)
            return Button
        end

        -- Toggle (Checkbox)
        function Section:Toggle(text, default, callback)
            local Toggle = Instance.new("TextButton")
            local ToggleLabel = Instance.new("TextLabel")
            local ToggleImage = Instance.new("ImageLabel")
            local ToggleCorner = Instance.new("UICorner")
            local ToggleImageCorner = Instance.new("UICorner")

            local toggled = default or false

            Toggle.Parent = SectionFrame
            Toggle.BackgroundColor3 = Color3.fromRGB(66, 69, 75)
            Toggle.BorderSizePixel = 0
            Toggle.Size = UDim2.new(0, 374, 0, 32)
            Toggle.AutoButtonColor = false
            Toggle.Text = ""
            Toggle.Font = Enum.Font.Gotham
            Toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
            Toggle.TextSize = 14.000

            ToggleCorner.CornerRadius = UDim.new(0, 4)
            ToggleCorner.Parent = Toggle

            ToggleLabel.Parent = Toggle
            ToggleLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            ToggleLabel.BackgroundTransparency = 1.000
            ToggleLabel.Position = UDim2.new(0, 5, 0, 0)
            ToggleLabel.Size = UDim2.new(0, 320, 0, 32)
            ToggleLabel.Font = Enum.Font.Gotham
            ToggleLabel.Text = text
            ToggleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
            ToggleLabel.TextSize = 14.000
            ToggleLabel.TextXAlignment = Enum.TextXAlignment.Left

            ToggleImage.Parent = Toggle
            ToggleImage.BackgroundColor3 = Color3.fromRGB(47, 49, 54)
            ToggleImage.BorderSizePixel = 0
            ToggleImage.Position = UDim2.new(0, 340, 0, 6)
            ToggleImage.Size = UDim2.new(0, 20, 0, 20)
            ToggleImage.Image = toggled and "rbxassetid://6035067836" or ""

            ToggleImageCorner.CornerRadius = UDim.new(0, 4)
            ToggleImageCorner.Parent = ToggleImage

            local function updateToggle()
                toggled = not toggled
                ToggleImage.Image = toggled and "rbxassetid://6035067836" or ""
                if callback then
                    callback(toggled)
                end
            end

            Toggle.MouseButton1Click:Connect(updateToggle)

            SectionFrame.CanvasSize = UDim2.new(0, 0, 0, SectionLayout.AbsoluteContentSize.Y)
            return Toggle
        end

        -- Slider (mejorado para móvil)
        function Section:Slider(text, min, max, default, callback)
            local SliderFrame = Instance.new("Frame")
            local SliderLabel = Instance.new("TextLabel")
            local SliderValue = Instance.new("TextLabel")
            local SliderBar = Instance.new("Frame")
            local SliderButton = Instance.new("TextButton")
            local SliderFill = Instance.new("Frame")
            local SliderCorner = Instance.new("UICorner")
            local SliderFillCorner = Instance.new("UICorner")
            local SliderButtonCorner = Instance.new("UICorner")

            local value = default or min
            local dragging = false

            SliderFrame.Parent = SectionFrame
            SliderFrame.BackgroundColor3 = Color3.fromRGB(66, 69, 75)
            SliderFrame.BorderSizePixel = 0
            SliderFrame.Size = UDim2.new(0, 374, 0, 52)

            SliderCorner.CornerRadius = UDim.new(0, 4)
            SliderCorner.Parent = SliderFrame

            SliderLabel.Parent = SliderFrame
            SliderLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            SliderLabel.BackgroundTransparency = 1.000
            SliderLabel.Position = UDim2.new(0, 5, 0, 5)
            SliderLabel.Size = UDim2.new(0, 200, 0, 20)
            SliderLabel.Font = Enum.Font.Gotham
            SliderLabel.Text = text
            SliderLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
            SliderLabel.TextSize = 14.000
            SliderLabel.TextXAlignment = Enum.TextXAlignment.Left

            SliderValue.Parent = SliderFrame
            SliderValue.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            SliderValue.BackgroundTransparency = 1.000
            SliderValue.Position = UDim2.new(0, 330, 0, 5)
            SliderValue.Size = UDim2.new(0, 40, 0, 20)
            SliderValue.Font = Enum.Font.Gotham
            SliderValue.Text = tostring(value)
            SliderValue.TextColor3 = Color3.fromRGB(255, 255, 255)
            SliderValue.TextSize = 14.000

            SliderBar.Parent = SliderFrame
            SliderBar.BackgroundColor3 = Color3.fromRGB(47, 49, 54)
            SliderBar.BorderSizePixel = 0
            SliderBar.Position = UDim2.new(0, 10, 0, 30)
            SliderBar.Size = UDim2.new(0, 354, 0, 12)

            local SliderBarCorner = Instance.new("UICorner")
            SliderBarCorner.CornerRadius = UDim.new(0, 6)
            SliderBarCorner.Parent = SliderBar

            SliderFill.Parent = SliderBar
            SliderFill.BackgroundColor3 = Color3.fromRGB(114, 137, 218)
            SliderFill.BorderSizePixel = 0
            SliderFill.Size = UDim2.new((value - min) / (max - min), 0, 1, 0)

            SliderFillCorner.CornerRadius = UDim.new(0, 6)
            SliderFillCorner.Parent = SliderFill

            SliderButton.Parent = SliderBar
            SliderButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            SliderButton.BorderSizePixel = 0
            SliderButton.Position = UDim2.new((value - min) / (max - min), -6, 0, 0)
            SliderButton.Size = UDim2.new(0, 12, 0, 12)
            SliderButton.Text = ""
            SliderButton.AutoButtonColor = false

            SliderButtonCorner.CornerRadius = UDim.new(0, 6)
            SliderButtonCorner.Parent = SliderButton

            local function updateSlider(input)
                local pos = input.Position.X - SliderBar.AbsolutePosition.X
                local size = SliderBar.AbsoluteSize.X
                local percent = math.clamp(pos / size, 0, 1)
                value = min + (max - min) * percent
                SliderValue.Text = tostring(math.floor(value))
                SliderFill.Size = UDim2.new(percent, 0, 1, 0)
                SliderButton.Position = UDim2.new(percent, -6, 0, 0)
                if callback then
                    callback(math.floor(value))
                end
            end

            SliderButton.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                    dragging = true
                    updateSlider(input)
                end
            end)

            SliderButton.InputChanged:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
                    if dragging then
                        updateSlider(input)
                    end
                end
            end)

            UserInputService.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                    dragging = false
                end
            end)

            SliderBar.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                    updateSlider(input)
                end
            end)

            SectionFrame.CanvasSize = UDim2.new(0, 0, 0, SectionLayout.AbsoluteContentSize.Y)
            return SliderFrame
        end

        -- ColorPicker (mejorado para móvil)
        function Section:ColorPicker(text, default, callback)
            local ColorPickerFrame = Instance.new("Frame")
            local ColorPickerLabel = Instance.new("TextLabel")
            local ColorButton = Instance.new("TextButton")
            local ColorDisplay = Instance.new("Frame")
            local ColorDisplayCorner = Instance.new("UICorner")
            local ColorPickerCorner = Instance.new("UICorner")

            local selectedColor = default or Color3.fromRGB(255, 255, 255)
            local picking = false

            ColorPickerFrame.Parent = SectionFrame
            ColorPickerFrame.BackgroundColor3 = Color3.fromRGB(66, 69, 75)
            ColorPickerFrame.BorderSizePixel = 0
            ColorPickerFrame.Size = UDim2.new(0, 374, 0, 42)

            ColorPickerCorner.CornerRadius = UDim.new(0, 4)
            ColorPickerCorner.Parent = ColorPickerFrame

            ColorPickerLabel.Parent = ColorPickerFrame
            ColorPickerLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            ColorPickerLabel.BackgroundTransparency = 1.000
            ColorPickerLabel.Position = UDim2.new(0, 5, 0, 0)
            ColorPickerLabel.Size = UDim2.new(0, 300, 0, 42)
            ColorPickerLabel.Font = Enum.Font.Gotham
            ColorPickerLabel.Text = text
            ColorPickerLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
            ColorPickerLabel.TextSize = 14.000
            ColorPickerLabel.TextXAlignment = Enum.TextXAlignment.Left

            ColorButton.Parent = ColorPickerFrame
            ColorButton.BackgroundColor3 = Color3.fromRGB(47, 49, 54)
            ColorButton.BorderSizePixel = 0
            ColorButton.Position = UDim2.new(0, 320, 0, 6)
            ColorButton.Size = UDim2.new(0, 30, 0, 30)
            ColorButton.Text = ""
            ColorButton.AutoButtonColor = false

            local ColorButtonCorner = Instance.new("UICorner")
            ColorButtonCorner.CornerRadius = UDim.new(0, 6)
            ColorButtonCorner.Parent = ColorButton

            ColorDisplay.Parent = ColorButton
            ColorDisplay.BackgroundColor3 = selectedColor
            ColorDisplay.BorderSizePixel = 0
            ColorDisplay.Position = UDim2.new(0, 3, 0, 3)
            ColorDisplay.Size = UDim2.new(0, 24, 0, 24)

            ColorDisplayCorner.CornerRadius = UDim.new(0, 4)
            ColorDisplayCorner.Parent = ColorDisplay

            local function createColorPickerPopup()
                if picking then return end
                picking = true

                local popup = Instance.new("Frame")
                local popupCorner = Instance.new("UICorner")
                local hueGradient = Instance.new("Frame")
                local hueCorner = Instance.new("UICorner")
                local hueSlider = Instance.new("TextButton")
                local hueSliderCorner = Instance.new("UICorner")
                local colorDisplay = Instance.new("Frame")
                local colorDisplayCorner = Instance.new("UICorner")
                local confirmButton = Instance.new("TextButton")
                local confirmCorner = Instance.new("UICorner")
                local cancelButton = Instance.new("TextButton")
                local cancelCorner = Instance.new("UICorner")

                popup.Parent = MainFrame
                popup.BackgroundColor3 = Color3.fromRGB(32, 34, 37)
                popup.BorderSizePixel = 0
                popup.Position = UDim2.new(0.5, -150, 0.5, -100)
                popup.Size = UDim2.new(0, 300, 0, 200)
                popup.ZIndex = 10

                popupCorner.CornerRadius = UDim.new(0, 8)
                popupCorner.Parent = popup

                hueGradient.Parent = popup
                hueGradient.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                hueGradient.BorderSizePixel = 0
                hueGradient.Position = UDim2.new(0, 10, 0, 10)
                hueGradient.Size = UDim2.new(0, 200, 0, 20)

                hueCorner.CornerRadius = UDim.new(0, 10)
                hueCorner.Parent = hueGradient

                -- Crear gradiente de color
                local hueGradientObject = Instance.new("UIGradient")
                hueGradientObject.Color = ColorSequence.new({
                    ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 0, 0)),
                    ColorSequenceKeypoint.new(0.17, Color3.fromRGB(255, 255, 0)),
                    ColorSequenceKeypoint.new(0.33, Color3.fromRGB(0, 255, 0)),
                    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(0, 255, 255)),
                    ColorSequenceKeypoint.new(0.67, Color3.fromRGB(0, 0, 255)),
                    ColorSequenceKeypoint.new(0.83, Color3.fromRGB(255, 0, 255)),
                    ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 0, 0))
                })
                hueGradientObject.Parent = hueGradient

                hueSlider.Parent = hueGradient
                hueSlider.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                hueSlider.BorderSizePixel = 0
                hueSlider.Position = UDim2.new(0, -5, 0, -2)
                hueSlider.Size = UDim2.new(0, 10, 0, 24)
                hueSlider.Text = ""
                hueSlider.ZIndex = 11

                hueSliderCorner.CornerRadius = UDim.new(0, 5)
                hueSliderCorner.Parent = hueSlider

                colorDisplay.Parent = popup
                colorDisplay.BackgroundColor3 = selectedColor
                colorDisplay.BorderSizePixel = 0
                colorDisplay.Position = UDim2.new(0, 220, 0, 10)
                colorDisplay.Size = UDim2.new(0, 70, 0, 70)

                colorDisplayCorner.CornerRadius = UDim.new(0, 6)
                colorDisplayCorner.Parent = colorDisplay

                confirmButton.Parent = popup
                confirmButton.BackgroundColor3 = Color3.fromRGB(114, 137, 218)
                confirmButton.BorderSizePixel = 0
                confirmButton.Position = UDim2.new(0, 10, 0, 160)
                confirmButton.Size = UDim2.new(0, 135, 0, 30)
                confirmButton.Text = "Confirm"
                confirmButton.Font = Enum.Font.Gotham
                confirmButton.TextColor3 = Color3.fromRGB(255, 255, 255)
                confirmButton.TextSize = 14
                confirmButton.ZIndex = 10

                confirmCorner.CornerRadius = UDim.new(0, 6)
                confirmCorner.Parent = confirmButton

                cancelButton.Parent = popup
                cancelButton.BackgroundColor3 = Color3.fromRGB(66, 69, 75)
                cancelButton.BorderSizePixel = 0
                cancelButton.Position = UDim2.new(0, 155, 0, 160)
                cancelButton.Size = UDim2.new(0, 135, 0, 30)
                cancelButton.Text = "Cancel"
                cancelButton.Font = Enum.Font.Gotham
                cancelButton.TextColor3 = Color3.fromRGB(255, 255, 255)
                cancelButton.TextSize = 14
                cancelButton.ZIndex = 10

                cancelCorner.CornerRadius = UDim.new(0, 6)
                cancelCorner.Parent = cancelButton

                -- Funcionalidad del slider de hue
                local hueDragging = false
                local currentHue = 0

                local function updateHue(input)
                    local pos = input.Position.X - hueGradient.AbsolutePosition.X
                    local size = hueGradient.AbsoluteSize.X
                    local percent = math.clamp(pos / size, 0, 1)
                    hueSlider.Position = UDim2.new(percent, -5, 0, -2)
                    currentHue = percent
                    -- Actualizar color de vista previa (simplificado)
                    colorDisplay.BackgroundColor3 = Color3.fromHSV(percent, 1, 1)
                end

                hueSlider.InputBegan:Connect(function(input)
                    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                        hueDragging = true
                        updateHue(input)
                    end
                end)

                hueSlider.InputChanged:Connect(function(input)
                    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
                        if hueDragging then
                            updateHue(input)
                        end
                    end
                end)

                UserInputService.InputEnded:Connect(function(input)
                    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                        hueDragging = false
                    end
                end)

                hueGradient.InputBegan:Connect(function(input)
                    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                        updateHue(input)
                    end
                end)

                confirmButton.MouseButton1Click:Connect(function()
                    selectedColor = colorDisplay.BackgroundColor3
                    ColorDisplay.BackgroundColor3 = selectedColor
                    if callback then
                        callback(selectedColor)
                    end
                    popup:Destroy()
                    picking = false
                end)

                cancelButton.MouseButton1Click:Connect(function()
                    popup:Destroy()
                    picking = false
                end)
            end

            ColorButton.MouseButton1Click:Connect(createColorPickerPopup)

            SectionFrame.CanvasSize = UDim2.new(0, 0, 0, SectionLayout.AbsoluteContentSize.Y)
            return ColorPickerFrame
        end

        -- Dropdown
        function Section:Dropdown(text, options, callback)
            local DropdownFrame = Instance.new("Frame")
            local DropdownLabel = Instance.new("TextLabel")
            local DropdownButton = Instance.new("TextButton")
            local DropdownList = Instance.new("ScrollingFrame")
            local DropdownListLayout = Instance.new("UIListLayout")
            local DropdownCorner = Instance.new("UICorner")
            local DropdownButtonCorner = Instance.new("UICorner")
            local DropdownListCorner = Instance.new("UICorner")

            local expanded = false
            local selected = text

            DropdownFrame.Parent = SectionFrame
            DropdownFrame.BackgroundColor3 = Color3.fromRGB(66, 69, 75)
            DropdownFrame.BorderSizePixel = 0
            DropdownFrame.Size = UDim2.new(0, 374, 0, 32)
            DropdownFrame.ClipsDescendants = true

            DropdownCorner.CornerRadius = UDim.new(0, 4)
            DropdownCorner.Parent = DropdownFrame

            DropdownLabel.Parent = DropdownFrame
            DropdownLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            DropdownLabel.BackgroundTransparency = 1.000
            DropdownLabel.Position = UDim2.new(0, 5, 0, 0)
            DropdownLabel.Size = UDim2.new(0, 300, 0, 32)
            DropdownLabel.Font = Enum.Font.Gotham
            DropdownLabel.Text = selected
            DropdownLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
            DropdownLabel.TextSize = 14.000
            DropdownLabel.TextXAlignment = Enum.TextXAlignment.Left

            DropdownButton.Parent = DropdownFrame
            DropdownButton.BackgroundColor3 = Color3.fromRGB(47, 49, 54)
            DropdownButton.BorderSizePixel = 0
            DropdownButton.Position = UDim2.new(0, 340, 0, 6)
            DropdownButton.Size = UDim2.new(0, 20, 0, 20)
            DropdownButton.Text = ""
            DropdownButton.AutoButtonColor = false

            DropdownButtonCorner.CornerRadius = UDim.new(0, 4)
            DropdownButtonCorner.Parent = DropdownButton

            DropdownList.Parent = DropdownFrame
            DropdownList.BackgroundColor3 = Color3.fromRGB(47, 49, 54)
            DropdownList.BorderSizePixel = 0
            DropdownList.Position = UDim2.new(0, 0, 0, 32)
            DropdownList.Size = UDim2.new(0, 374, 0, 0)
            DropdownList.CanvasSize = UDim2.new(0, 0, 0, 0)
            DropdownList.Visible = false
            DropdownList.ScrollBarThickness = 4

            DropdownListCorner.CornerRadius = UDim.new(0, 4)
            DropdownListCorner.Parent = DropdownList

            DropdownListLayout.Parent = DropdownList
            DropdownListLayout.Padding = UDim.new(0, 2)

            local function updateListHeight()
                DropdownList.CanvasSize = UDim2.new(0, 0, 0, DropdownListLayout.AbsoluteContentSize.Y)
                if expanded then
                    DropdownFrame.Size = UDim2.new(0, 374, 0, 32 + DropdownListLayout.AbsoluteContentSize.Y + 4)
                end
            end

            for i, option in ipairs(options) do
                local OptionButton = Instance.new("TextButton")
                OptionButton.Parent = DropdownList
                OptionButton.BackgroundColor3 = Color3.fromRGB(66, 69, 75)
                OptionButton.BorderSizePixel = 0
                OptionButton.Size = UDim2.new(0, 364, 0, 24)
                OptionButton.Text = option
                OptionButton.Font = Enum.Font.Gotham
                OptionButton.TextColor3 = Color3.fromRGB(255, 255, 255)
                OptionButton.TextSize = 13.000
                OptionButton.AutoButtonColor = false

                local OptionCorner = Instance.new("UICorner")
                OptionCorner.CornerRadius = UDim.new(0, 4)
                OptionCorner.Parent = OptionButton

                OptionButton.MouseButton1Click:Connect(function()
                    selected = option
                    DropdownLabel.Text = selected
                    if callback then
                        callback(option)
                    end
                    expanded = false
                    DropdownList.Visible = false
                    DropdownFrame.Size = UDim2.new(0, 374, 0, 32)
                end)
            end

            updateListHeight()

            DropdownButton.MouseButton1Click:Connect(function()
                expanded = not expanded
                DropdownList.Visible = expanded
                if expanded then
                    DropdownFrame.Size = UDim2.new(0, 374, 0, 32 + DropdownListLayout.AbsoluteContentSize.Y + 4)
                else
                    DropdownFrame.Size = UDim2.new(0, 374, 0, 32)
                end
            end)

            SectionFrame.CanvasSize = UDim2.new(0, 0, 0, SectionLayout.AbsoluteContentSize.Y)
            return DropdownFrame
        end

        -- TextBox
        function Section:Textbox(text, placeholder, callback)
            local TextboxFrame = Instance.new("Frame")
            local TextboxLabel = Instance.new("TextLabel")
            local Textbox = Instance.new("TextBox")
            local TextboxCorner = Instance.new("UICorner")
            local TextboxFrameCorner = Instance.new("UICorner")

            TextboxFrame.Parent = SectionFrame
            TextboxFrame.BackgroundColor3 = Color3.fromRGB(66, 69, 75)
            TextboxFrame.BorderSizePixel = 0
            TextboxFrame.Size = UDim2.new(0, 374, 0, 52)

            TextboxFrameCorner.CornerRadius = UDim.new(0, 4)
            TextboxFrameCorner.Parent = TextboxFrame

            TextboxLabel.Parent = TextboxFrame
            TextboxLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            TextboxLabel.BackgroundTransparency = 1.000
            TextboxLabel.Position = UDim2.new(0, 5, 0, 5)
            TextboxLabel.Size = UDim2.new(0, 200, 0, 20)
            TextboxLabel.Font = Enum.Font.Gotham
            TextboxLabel.Text = text
            TextboxLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
            TextboxLabel.TextSize = 14.000
            TextboxLabel.TextXAlignment = Enum.TextXAlignment.Left

            Textbox.Parent = TextboxFrame
            Textbox.BackgroundColor3 = Color3.fromRGB(47, 49, 54)
            Textbox.BorderSizePixel = 0
            Textbox.Position = UDim2.new(0, 5, 0, 27)
            Textbox.Size = UDim2.new(0, 364, 0, 20)
            Textbox.Font = Enum.Font.Gotham
            Textbox.PlaceholderText = placeholder
            Textbox.Text = ""
            Textbox.TextColor3 = Color3.fromRGB(255, 255, 255)
            Textbox.TextSize = 13.000
            Textbox.ClearTextOnFocus = false

            TextboxCorner.CornerRadius = UDim.new(0, 4)
            TextboxCorner.Parent = Textbox

            Textbox.FocusLost:Connect(function(enterPressed)
                if enterPressed then
                    if callback then
                        callback(Textbox.Text)
                    end
                end
            end)

            SectionFrame.CanvasSize = UDim2.new(0, 0, 0, SectionLayout.AbsoluteContentSize.Y)
            return Textbox
        end

        return Section
    end

    function Servers:Select(Name)
        for i, v in pairs(ServersHold:GetChildren()) do
            if v:IsA("TextButton") then
                if v.Name == Name then
                    TweenService:Create(v, TweenInfo.new(0.2), {BackgroundTransparency = 0}):Play()
                else
                    TweenService:Create(v, TweenInfo.new(0.2), {BackgroundTransparency = 0.5}):Play()
                end
            end
        end
        currentservertoggled = Name
        for i, v in pairs(Channels) do
            if v.Parent then
                v.Visible = false
            end
        end
        for i, v in pairs(Channels) do
            if i:match("^" .. Name .. ":") then
                if v.Parent then
                    v.Visible = true
                end
            end
        end
    end

    return {
        Server = Servers,
        Channel = Servers.Channel,
        CreateSection = ServerNamespace.CreateSection,
        SetTheme = DiscordLib.SetTheme
    }
end

function DiscordLib:Notification(data)
    local title = data.title or "Notification"
    local desc = data.desc or ""
    local time = data.time or 5

    local NotifHolder = Instance.new("Frame")
    local NotifTitle = Instance.new("TextLabel")
    local NotifDesc = Instance.new("TextLabel")
    local NotifCorner = Instance.new("UICorner")

    NotifHolder.Name = "Notification"
    NotifHolder.Parent = Discord
    NotifHolder.BackgroundColor3 = Color3.fromRGB(32, 34, 37)
    NotifHolder.BorderSizePixel = 0
    NotifHolder.Position = UDim2.new(1, -310, 0, 10)
    NotifHolder.Size = UDim2.new(0, 300, 0, 70)
    NotifHolder.ClipsDescendants = true

    NotifCorner.CornerRadius = UDim.new(0, 8)
    NotifCorner.Parent = NotifHolder

    NotifTitle.Parent = NotifHolder
    NotifTitle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    NotifTitle.BackgroundTransparency = 1.000
    NotifTitle.Position = UDim2.new(0, 10, 0, 10)
    NotifTitle.Size = UDim2.new(0, 280, 0, 20)
    NotifTitle.Font = Enum.Font.GothamBold
    NotifTitle.Text = title
    NotifTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
    NotifTitle.TextSize = 16.000
    NotifTitle.TextXAlignment = Enum.TextXAlignment.Left

    NotifDesc.Parent = NotifHolder
    NotifDesc.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    NotifDesc.BackgroundTransparency = 1.000
    NotifDesc.Position = UDim2.new(0, 10, 0, 35)
    NotifDesc.Size = UDim2.new(0, 280, 0, 25)
    NotifDesc.Font = Enum.Font.Gotham
    NotifDesc.Text = desc
    NotifDesc.TextColor3 = Color3.fromRGB(200, 200, 200)
    NotifDesc.TextSize = 14.000
    NotifDesc.TextWrapped = true
    NotifDesc.TextXAlignment = Enum.TextXAlignment.Left
    NotifDesc.TextYAlignment = Enum.TextYAlignment.Top

    NotifHolder.Position = UDim2.new(1, -310, 0, -80)
    TweenService:Create(NotifHolder, TweenInfo.new(0.5, Enum.EasingStyle.Quint), {Position = UDim2.new(1, -310, 0, 10)}):Play()

    spawn(function()
        wait(time)
        TweenService:Create(NotifHolder, TweenInfo.new(0.5, Enum.EasingStyle.Quint), {Position = UDim2.new(1, -310, 0, -80)}):Play()
        wait(0.5)
        NotifHolder:Destroy()
    end)
end

function DiscordLib:SetTheme(themeColor)
    if Discord and Discord:FindFirstChild("MainFrame") then
        local MainFrame = Discord.MainFrame
        MainFrame.BackgroundColor3 = themeColor
        local TopFrame = MainFrame:FindFirstChild("TopFrame")
        if TopFrame then
            TopFrame.BackgroundColor3 = themeColor
        end
    end
end

return DiscordLib
